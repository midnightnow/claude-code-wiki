# Agent Instructions - Claude Code Wiki Integration

> This file teaches AI agents how to use the Ultra-Agentic Wiki System for codebase understanding.

## Quick Start

Before making any code changes, gather context using one of these methods:

### Method 1: Read Context File (Recommended)
```
Read the file GEMINI_CONTEXT.md in this project root.
It contains the complete architecture, file structure, and patterns.
```

### Method 2: CLI Commands
```bash
# Search for relevant files
wiki find "authentication"

# Get project overview
wiki info <project-name>

# Generate/update context
wiki prepare .
```

### Method 3: HTTP API (if server running)
```bash
curl http://localhost:3030/search?q=auth
curl http://localhost:3030/info?q=myproject
curl http://localhost:3030/context?q=myproject
```

---

## Available Commands

| Command | Description | Example |
|---------|-------------|---------|
| `wiki scan` | Index all projects | `wiki scan` |
| `wiki find <query>` | Search files across projects | `wiki find "stripe"` |
| `wiki list` | Show all indexed projects | `wiki list` |
| `wiki info <project>` | Get project details | `wiki info aiva-help` |
| `wiki prepare <path>` | Generate GEMINI_CONTEXT.md | `wiki prepare ~/myapp` |
| `wiki ask <question>` | Natural language query | `wiki ask "how does billing work"` |
| `wiki server start` | Start HTTP API | `wiki server start` |
| `wiki health` | Check system status | `wiki health` |

---

## For Claude Code Agents

Use these slash commands in Claude Code:

```
/wiki-scan       - Index all projects
/wiki-find       - Search across codebase
/wiki-prepare    - Generate context manifest
/wiki-ask        - Natural language query
```

---

## For Cursor / VS Code Agents

1. **First**, run in terminal:
   ```bash
   wiki prepare .
   ```

2. **Then**, add `GEMINI_CONTEXT.md` to your context:
   - Cursor: Use "Add to Chat" or `@GEMINI_CONTEXT.md`
   - VS Code: Include file in conversation

---

## For Gemini CLI

Gemini CLI auto-detects `GEMINI_CONTEXT.md` files:

```bash
cd ~/myproject
wiki prepare .  # Generate context
gemini          # Start Gemini - it reads the context
```

---

## For Custom Scripts / CI

```bash
#!/bin/bash
# Example: Get project info as JSON
wiki info myproject | jq .

# Example: Search and process results
wiki find "api" | while read -r file; do
    echo "Found: $file"
done
```

---

## Context File Format

The `GEMINI_CONTEXT.md` file contains:

1. **Project Overview** - Name, type, language, path
2. **Directory Structure** - Tree view of important files
3. **Key Files** - Config files, entry points
4. **Dependencies** - Package dependencies
5. **Architecture** - Detected patterns (Firebase, Next.js, etc.)
6. **Quick Reference** - Common tasks and commands

---

## Best Practices

1. **Always read context first** before making changes
2. **Update context** after structural changes: `wiki prepare .`
3. **Search before creating** - check if similar code exists: `wiki find "utility"`
4. **Follow existing patterns** - the context file documents them

---

## Database Location

The wiki stores project metadata in SQLite:

```
~/.local/share/claude-wiki/wiki.db
```

Query directly if needed:
```bash
sqlite3 ~/.local/share/claude-wiki/wiki.db "SELECT name, type FROM projects"
```

---

## Troubleshooting

**"No projects indexed"**
```bash
wiki scan  # Re-index projects
```

**"Context file outdated"**
```bash
wiki prepare .  # Regenerate
```

**"Command not found"**
```bash
# Source shell config
source ~/.zshrc
# Or use full path
~/.claude/scripts/wiki
```

---

*Generated by [Claude Code Wiki](https://github.com/midnightnow/claude-code-wiki) v1.0.0*
